# Database Configuration
# =====================
# IMPORTANT: Use these exact connection strings for Supabase PRO plan with Session Pooler
#
# DATABASE_URL: Used by application at runtime (Next.js API routes, server components)
#   - Uses Session Pooler (pooler.supabase.com) for connection pooling
#   - Required parameters: pgbouncer=true, connection_limit=1, sslmode=require
#   - Format: postgresql://postgres.PROJECT_ID:PASSWORD@REGION.pooler.supabase.com:5432/postgres
#
# DIRECT_URL: Used ONLY by Prisma CLI (migrations, db push, db pull, studio)
#   - Uses direct connection (db.PROJECT_ID.supabase.co) bypassing pooler
#   - Required parameters: sslmode=require
#   - Format: postgresql://postgres.PROJECT_ID:PASSWORD@db.PROJECT_ID.supabase.co:5432/postgres
#
# Password Encoding:
#   - Special characters MUST be URL-encoded in connection strings
#   - Examples: ! = %21, @ = %40, # = %23, $ = %24, % = %25
#   - Use online URL encoder or: encodeURIComponent('your-password')
#
# Never use DIRECT_URL in application code - it's for Prisma CLI only!
# =====================

# Session Pooler (for app runtime)
DATABASE_URL="postgresql://postgres.PROJECT_ID:PASSWORD@aws-1-ap-south-1.pooler.supabase.com:5432/postgres?pgbouncer=true&connection_limit=1&sslmode=require"

# Direct Connection (for Prisma CLI only)
DIRECT_URL="postgresql://postgres.PROJECT_ID:PASSWORD@db.PROJECT_ID.supabase.co:5432/postgres?sslmode=require"

# NextAuth
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-secret-key-here"
NEXTAUTH_URL="https://jstudyroom.dev"

# App URL
NEXT_PUBLIC_APP_URL="https://jstudyroom.dev"

# Admin Account
# REQUIRED: Set a secure password for the admin account (sivaramj83@gmail.com)
# This is used by prisma/seed-admin.ts to create the admin user
ADMIN_SEED_PASSWORD="your-secure-admin-password-here"

# Resend Email Service
# Get API key from: https://resend.com/api-keys
RESEND_API_KEY="re_xxxxxxxxxxxxx"
# MUST be support@jstudyroom.dev for admin-managed access system
RESEND_FROM_EMAIL="support@jstudyroom.dev"

# Supabase Storage
NEXT_PUBLIC_SUPABASE_URL="https://xxx.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJxxx..."
SUPABASE_SERVICE_ROLE_KEY="eyJxxx..."
SUPABASE_URL="https://xxx.supabase.co"
SUPABASE_PAGES_BUCKET="document-pages"

# Cron Job Security
# Generate with: openssl rand -hex 32
# Used to secure automated token cleanup endpoint
CRON_SECRET="your-cron-secret-here"

# Razorpay (Optional - for payments)
RAZORPAY_KEY_ID="rzp_test_xxx"
RAZORPAY_KEY_SECRET="xxx"
NEXT_PUBLIC_RAZORPAY_KEY_ID="rzp_test_xxx"

# PDF.js Feature Flags (Task 16.1, 16.2)
# =====================
# Enable PDF.js viewer (replaces iframe-based PDF rendering)
# Set to 'true' to enable, 'false' to disable
NEXT_PUBLIC_ENABLE_PDFJS="false"

# Gradual rollout percentage (0-100)
# If set, only this percentage of users will see PDF.js viewer
# If not set or empty, all users get the feature when enabled
# Example: "10" = 10% of users, "50" = 50% of users, "100" = all users
NEXT_PUBLIC_PDFJS_ROLLOUT_PERCENTAGE=""

# Test user IDs (comma-separated)
# These users will always see PDF.js viewer regardless of rollout percentage
# Example: "user-id-1,user-id-2,user-id-3"
NEXT_PUBLIC_PDFJS_TEST_USER_IDS=""

# Test user emails (comma-separated)
# These emails will always see PDF.js viewer regardless of rollout percentage
# Example: "test1@example.com,test2@example.com"
NEXT_PUBLIC_PDFJS_TEST_EMAILS=""
